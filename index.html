<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>药物记录管理</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>药物记录管理</h1>
            <div class="header-actions">
                <button id="addDrugBtn" class="btn btn-primary">添加药物</button>
                <button id="importBtn" class="btn btn-secondary">导入</button>
                <button id="undoImportBtn" class="btn btn-secondary" disabled>撤销导入</button>
                <button id="exportBtn" class="btn btn-secondary">导出</button>
            </div>
        </header>

        <main>
            <div class="search-section">
                <input type="text" id="searchInput" placeholder="搜索药物名称、作用、剂量、禁忌...">
                <button id="clearSearchBtn" class="btn btn-small">清除</button>
            </div>

            <div id="drugList" class="drug-list">
                <!-- 药物卡片将在这里动态生成 -->
            </div>

            <div id="emptyState" class="empty-state" style="display: none;">
                <p>暂无药物记录</p>
                <button id="addFirstDrugBtn" class="btn btn-primary">添加第一个药物</button>
            </div>
        </main>
    </div>

    <!-- 添加/编辑药物模态框 -->
    <div id="drugModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">添加药物</h2>
                <span class="close">&times;</span>
            </div>
            <form id="drugForm">
                <div class="form-group">
                    <label for="drugName">药物名称 *</label>
                    <input type="text" id="drugName" required>
                </div>
                <div class="form-group">
                    <label for="dosage">药物剂量 *</label>
                    <select id="dosageSelect" style="display: none; margin-bottom: 5px;">
                        <option value="">请选择剂量</option>
                    </select>
                    <input type="text" id="dosage" required placeholder="例如：100mg">
                </div>
                <div class="form-group">
                    <label for="usageAmount">药物用量 *</label>
                    <input type="text" id="usageAmount" required placeholder="例如：2片 / 10ml">
                </div>
                <div class="form-group">
                    <label for="frequency">使用频次 *</label>
                    <select id="frequency" required>
                        <option value="">请选择频率</option>
                        <option value="qd">qd - 每日一次</option>
                        <option value="bid">bid - 每日2次</option>
                        <option value="tid">tid - 每日3次</option>
                        <option value="qid">qid - 每日4次</option>
                        <option value="qh">qh - 每小时一次</option>
                        <option value="q2h">q2h - 每2小时一次</option>
                        <option value="q3h">q3h - 每3小时一次</option>
                        <option value="qxh">qxh - 每x小时一次</option>
                        <option value="q12h">q12h - 每12小时一次</option>
                        <option value="qod">qod - 隔日一次</option>
                        <option value="qw">qw - 每周一次</option>
                        <option value="qow">qow - 隔周一次</option>
                        <option value="biw">biw - 每周2次</option>
                        <option value="tiw">tiw - 每周3次</option>
                        <option value="q2w">q2w - 每2周一次</option>
                        <option value="q3w">q3w - 每3周一次</option>
                        <option value="q4w">q4w - 每4周一次</option>
                        <option value="qm">qm - 每月一次</option>
                        <option value="bim">bim - 每月2次</option>
                        <option value="q2m">q2m - 每2月一次</option>
                        <option value="once">once - 一次</option>
                        <option value="qm_morning">qm - 每晨一次</option>
                        <option value="qn">qn - 每晚一次</option>
                        <option value="ac">ac - 餐前</option>
                        <option value="pc">pc - 餐后</option>
                        <option value="hs">hs - 睡前</option>
                        <option value="st">st - 立即</option>
                        <option value="prn">prn - 必要时</option>
                        <option value="frequency_other">其它（自行填写）</option>
                    </select>
                    <input type="text" id="frequencyOther" placeholder="请输入频率" style="display: none; margin-top: 5px;">
                </div>
                <div class="form-group">
                    <label for="administration">药物用法 *</label>
                    <select id="administration" required>
                        <option value="">请选择用法</option>
                        <option value="ID">ID - 皮内注射</option>
                        <option value="H">H - 皮下注射</option>
                        <option value="IM">IM - 肌肉注射</option>
                        <option value="IV">IV - 静脉注射</option>
                        <option value="PO">PO - 口服</option>
                        <option value="ad_us_int">ad us.int - 内服</option>
                        <option value="ad_us_ext">ad us.ext - 外用</option>
                        <option value="IV_gtt">IV gtt - 静脉滴注</option>
                        <option value="Inhal">Inhal - 吸入</option>
                        <option value="administration_other">其它（自行填写）</option>
                    </select>
                    <input type="text" id="administrationOther" placeholder="请输入用法" style="display: none; margin-top: 5px;">
                </div>
                <div class="form-group">
                    <label for="effect">药物作用 *</label>
                    <textarea id="effect" rows="2" placeholder="药物的主要作用和适应症" required></textarea>
                </div>
                <div class="form-group">
                    <label for="contraindications">使用禁忌</label>
                    <textarea id="contraindications" rows="2" placeholder="禁忌症"></textarea>
                </div>
                <div class="form-group">
                    <label for="notes">注意事项</label>
                    <textarea id="notes" rows="3" placeholder="其他重要信息"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" id="cancelBtn" class="btn btn-secondary">取消</button>
                    <button type="submit" class="btn btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 导入文件模态框 -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>导入药物数据</h2>
                <span class="close">&times;</span>
            </div>
            <div class="import-section">
                <p>选择之前导出的JSON文件：</p>
                <input type="file" id="importFile" accept=".json">
                <div class="form-actions">
                    <button type="button" id="cancelImportBtn" class="btn btn-secondary">取消</button>
                    <button type="button" id="confirmImportBtn" class="btn btn-primary">导入</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>